{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass RawTask {\n  call() {\n    try {\n      this.task && this.task();\n    } catch (error) {\n      this.onError(error);\n    } finally {\n      this.task = null;\n      this.release(this);\n    }\n  }\n  constructor(onError, release) {\n    this.onError = onError;\n    this.release = release;\n    this.task = null;\n  }\n}\nexports.RawTask = RawTask;","map":{"version":3,"sources":["../../src/RawTask.ts"],"names":["RawTask","task","onError","release","call","error"],"mappings":"AAEA,YAAA;;;;;AAGO,MAAMA,OAAO,CAAA;EAQZI,IAAI,GAAG;IACb,IAAI;MACH,IAAI,CAACH,IAAI,IAAI,IAAI,CAACA,IAAI,EAAE;KACxB,CAAC,OAAOI,KAAK,EAAE;MACf,IAAI,CAACH,OAAO,CAACG,KAAK,CAAC;KACnB,SAAS;MACT,IAAI,CAACJ,IAAI,GAAG,IAAI;MAChB,IAAI,CAACE,OAAO,CAAC,IAAI,CAAC;IAClB;EACD;EAdD,WAAA,CACSD,OAA2B,EAC3BC,OAA6B,EACpC;SAFOD,OAA2B,GAA3BA,OAA2B;SAC3BC,OAA6B,GAA7BA,OAA6B;SAJ/BF,IAAI,GAAkB,IAAI;EAK7B;AAYJ;QAlBYD,OAAO,GAAPA,OAAO","sourcesContent":["// We wrap tasks with recyclable task objects.  A task object implements\n\nimport type { TaskFn, Task } from 'types'\n\n// `call`, just like a function.\nexport class RawTask implements Task {\n\tpublic task: TaskFn | null = null\n\n\tpublic constructor(\n\t\tprivate onError: (err: any) => void,\n\t\tprivate release: (t: RawTask) => void,\n\t) {}\n\n\tpublic call() {\n\t\ttry {\n\t\t\tthis.task && this.task()\n\t\t} catch (error) {\n\t\t\tthis.onError(error)\n\t\t} finally {\n\t\t\tthis.task = null\n\t\t\tthis.release(this)\n\t\t}\n\t}\n}\n"]},"metadata":{},"sourceType":"script"}
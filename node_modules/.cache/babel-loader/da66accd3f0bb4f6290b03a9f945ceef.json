{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _rawTaskJs = require(\"./RawTask.js\");\nclass TaskFactory {\n  create(task) {\n    const tasks = this.freeTasks;\n    const t1 = tasks.length ? tasks.pop() : new _rawTaskJs.RawTask(this.onError, t => tasks[tasks.length] = t);\n    t1.task = task;\n    return t1;\n  }\n  constructor(onError) {\n    this.onError = onError;\n    this.freeTasks = [];\n  }\n}\nexports.TaskFactory = TaskFactory;","map":{"version":3,"sources":["../../src/TaskFactory.ts"],"names":["TaskFactory","freeTasks","onError","create","task","tasks","t","length","pop","RawTask"],"mappings":"AAAA,YAAA;;;;;AACwB,IAAA,UAAc,GAAA,OAAA,CAAd,cAAc,CAAA;AAE/B,MAAMA,WAAW,CAAA;EAKhBG,MAAM,CAACC,IAAgB,EAAQ;IACrC,MAAMC,KAAK,GAAG,IAAI,CAACJ,SAAS;IAC5B,MAAMK,EAAC,GAAGD,KAAK,CAACE,MAAM,GAClBF,KAAK,CAACG,GAAG,EAAE,GACZ,IAAIC,UAAO,CAAA,OAAA,CAAC,IAAI,CAACP,OAAO,EAAGI,CAAC,IAAMD,KAAK,CAACA,KAAK,CAACE,MAAM,CAAC,GAAGD,CAAC,CAAE;IAC9DA,EAAC,CAACF,IAAI,GAAGA,IAAI;IACb,OAAOE,EAAC;EACR;EATD,WAAA,CAA2BJ,OAA2B,EAAE;SAA7BA,OAA2B,GAA3BA,OAA2B;SAF9CD,SAAS,GAAc,EAAE;EAEyB;AAU1D;QAbYD,WAAW,GAAXA,WAAW","sourcesContent":["import type { Task } from './types.js'\nimport { RawTask } from './RawTask.js'\n\nexport class TaskFactory {\n\tprivate freeTasks: RawTask[] = []\n\n\tpublic constructor(private onError: (err: any) => void) {}\n\n\tpublic create(task: () => void): Task {\n\t\tconst tasks = this.freeTasks\n\t\tconst t = tasks.length\n\t\t\t? (tasks.pop() as RawTask)\n\t\t\t: new RawTask(this.onError, (t) => (tasks[tasks.length] = t))\n\t\tt.task = task\n\t\treturn t\n\t}\n}\n"]},"metadata":{},"sourceType":"script"}